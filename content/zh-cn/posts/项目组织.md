---
title: "项目组织"
description: ""
date: "23-05-16 23:05:10"
thumbnail: ""
categories:
  - ""
tags:
  - ""
sidebar: true
---

近期完成了一次 Python 项目作业，涉及代码和论文。
该项目尝试使用一种规范的方式进行组织。
受 [Mario Krapp/semic-project](https://gitlab.pik-potsdam.de/krapp/semic-project)启发，给出了自己的项目组织结构和方法。
具体记录如下。
主要包括用 `cookiecutter`生成项目结构，以及利用规范的代码注释生成 API 文档。

## cookiecutter build

`cookiecutter` 相关内容见官方文档 [cookiecutter-pypackage](https://github.com/audreyr/cookiecutter-pypackage)。

### 命令

```bash
cookiecutter gh:Mingzefei/cookiecutter-science
```

### 结构

```text
.
├── AUTHORS.md
├── LICENSE
├── README.md
├── Makefile           <- Makefile for this programs, e.g., get_data, clean, etc., or any commands
├── backup             <- Data and results can be backuped here (tracked by git)
├── bin                <- Your compiled model code can be stored here (not tracked by git)
├── config             <- Configuration files, e.g., for doxygen or for your model if needed
├── data
│   ├── external       <- Data from third party sources.
│   ├── interim        <- Intermediate data that has been transformed.
│   ├── processed      <- The final, canonical data sets for modeling.
│   └── raw            <- The original, immutable data dump.
├── docs               <- Documentation, e.g., doxygen or scientific papers (not tracked by git)
├── notebooks          <- Ipython or R notebooks
├── reports            <- For a manuscript source, e.g., LaTeX, Markdown, etc., or any project reports
│   ├── Makefile       <- Makefile for build LaTeX
│   └── figures        <- Figures for the manuscript or reports
└── src                <- Source code for this project
    ├── data           <- scripts and programs to process data
    ├── external       <- Any external source code, e.g., pull other git projects, or external libraries
    ├── models         <- Source code for your own model
    ├── tools          <- Any helper scripts go here
    └── visualization  <- Scripts for visualisation of your results, e.g., matplotlib, ggplot2 related.
```

### 说明

1. `config`下存放基础配置，包括实验参数，建议使用 `config.ini`或 `confg.py`。
2. `src`下存放项目源代码，运行结果保存在 `results` 中。
3. git 不会跟踪 `data` 和 `results`，如需记录或保存，建议使用 `make backup`等命令将 `data`和 `results`备份于 `backup`。
4. `reports`下预设有编译 Latex 文件的`Makefile`，可执行编译、清理等操作。

## docs build

使用 `Sphinx`自动生成 Python 项目的 API 文档，要求代码注释规范。

### sphinx 使用

```bash
# 0. 安装
pip install sphinx
# 1. 初始化
cd docs
sphinx-quickstart
# 2. 配置
vi source/conf.py
# ---进入文件编辑
# 1) 添加路径
import os
import sys
sys.path.insert(0, os.path.abspath('../../src'))
# 2) 添加插件
extensions = [
    'sphinx.ext.autodoc',
    'sphinx.ext.napoleon',
    'sphinx.ext.doctest',
    'sphinx.ext.intersphinx',
    'sphinx.ext.todo',
    'sphinx.ext.coverage',
    'sphinx.ext.mathjax',
]
# 3) 指定风格
html_theme = 'sphinx_rtd_theme'
# ---退出文件编辑
# 3. 编译
sphinx-apidoc -o source ../src/
make html
```

### 代码规范注释

个人常使用 Google 注释风格。

VScode 可借助插件 [mintlify/writer](https://github.com/mintlify/writer)生成质量可以的注释，但需要注意函数变量注释的缩进，具体参考官方的 Google 注释风格文档。

Vim 目前尚无该插件，可用 [heavenshell/vim-pydocstring](https://github.com/heavenshell/vim-pydocstring)作为替代。
